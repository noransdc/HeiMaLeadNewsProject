<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.heima.schedule.mapper.ScheduleTaskMapper">
    <insert id="insertBatch">
        insert into schedule_task
        (task_type, biz_key, execute_time, parameters)
        values
            <foreach collection="taskList" item="task" separator=",">
                (
                 #{task.taskType},
                 #{task.bizKey},
                 #{task.executeTime},
                 #{task.parameters, jdbcType=OTHER}
                )
            </foreach>
        on duplicate key update
            execute_time = least(execute_time, VALUES(execute_time))
    </insert>
</mapper>